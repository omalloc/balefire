syntax = "proto3";
package transport.v1;

option go_package = "github.com/omalloc/balefire/api/transport/v1;transportv1";

enum MessageType {
  PING = 0;       // 心跳检测
  PONG = 1;       // 心跳响应
  DATA = 2;       // 数据载荷
  ACK = 3;        // 确认回执
}

message Message {
  string id = 1;                  // UUID，全局唯一消息ID
  MessageType type = 2;           // 消息类型
  bytes payload = 3;              // 实际数据载荷
  int64 timestamp = 4;            // 发送时间戳 (Unix Nano)
  map<string, string> metadata = 5; // 元数据 (TraceID, Priority, etc.)
  bytes signature = 6;            // Ed25519 签名，防篡改
}
